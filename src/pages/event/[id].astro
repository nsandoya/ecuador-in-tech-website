---
import Layout from "../../layouts/Layout.astro";
import events from "../../assets/events.json";
import banner from '../../../public/banner_events.png'

export function getStaticPaths() {
  return events.map(event => ({
    params: { id: event.id },
    props: { event },
  }));
}

const { event } = Astro.props;

const formattedDate = new Date(event.date).toLocaleDateString('es-EC', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const formattedTime = new Date(event.date).toLocaleTimeString('es-EC', {
  hour: '2-digit',
  minute: '2-digit'
});
---

<Layout title={event.title}>
  <main class="event-main-card">
    <div class="event-hero">
      <img src={banner.src} alt={event.title} class="event-image" />
      <div class="event-overlay"></div>
    </div>
    
    <div class="event-container">
      <div class="event-content">
        <nav class="breadcrumb" aria-label="breadcrumb">
          <a href="/events">Eventos</a>
          <span>/</span>
          <span>{event.title}</span>
        </nav>

        <div class="event-header">
          <h1 class="event-header-title">{event.title}</h1>
          <p class="event-tagline">Organizado por <span class="host-name">{event.hostedBy}</span></p>
        </div>

        <div class="event-grid ">
          <section class="event-ad">
            <img src={event.image} alt={event.title} class="rounded-xl">
          </section>

          <section class="event-meta ">
            <div class="meta-item">
              <div class="meta-icon">ğŸ“…</div>
              <div class="meta-content">
                <h3>Fecha y Hora</h3>
                <p>{formattedDate}</p>
                <p>{formattedTime}</p>
              </div>
            </div>

            <div class="meta-item">
              <div class="meta-icon">ğŸ“</div>
              <div class="meta-content">
                <h3>UbicaciÃ³n</h3>
                <p>{event.place}</p>
              </div>
            </div>

            <div class="meta-item">
              <div class="meta-icon">ğŸ‘¥</div>
              <div class="meta-content">
                <h3>Asistentes</h3>
                <p><span class="attendee-count">{event.attendees}</span> personas </p>
              </div>
            </div>

            <aside class="event-sidebar">
              <div class="registration-card">
                <div class="card-content">
                  <h3>Â¿Listo para unirte?</h3>
                  
                  <p>Asegura tu lugar en este increÃ­ble evento</p>
                  <a href={event.link} class="register-button" target="_blank" rel="noopener noreferrer">
                    InscrÃ­bete
                  </a>
                  <p class="registration-note">* RecibirÃ¡s el link de acceso al registrarte</p>
                </div>
              </div>
            </aside>
          </section>

          <section class="event-description">
            <h2 class="">Acerca de este evento</h2>
            <p>{event.longDescription}</p>
          </section>

          
        </div>
      </div>
    </div>
  </main>
</Layout>
